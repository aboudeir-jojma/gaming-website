<!DOCTYPE html>
<html>
  <head>
    <title></title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport"
      content="width=device-width, user-scalable=no, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, minimal-ui" />
    <meta name="msapplication-tap-highlight" content="no" />

    <link rel="stylesheet" href="css/reset.css" type="text/css" />
    <link rel="stylesheet" href="css/main.css" type="text/css" />

    <script type="text/javascript" src="js/jquery-2.0.3.min.js"></script>
    <script type="text/javascript" src="js/createjs-2013.12.12.min.js"></script>
    <script type="text/javascript" src="js/main.js"></script>

    <!-- ✅ SDK GameMonetize + ad break
    <script type="text/javascript">
      window.SDK_OPTIONS = {
        gameId: "your_game_id_here",
        onEvent: function (a) {
          switch (a.name) {
            case "SDK_READY":
              // Quand SDK est prêt, lancer l'ad break au bout de 30s puis toutes les 3 minutes
              setTimeout(() => {
                showAdBreakThenAd();
                setInterval(showAdBreakThenAd, 180000);
              }, 180000);
              break;
          }
        }
      };
      (function (a, b, c) {
        var d = a.getElementsByTagName(b)[0];
        if (!a.getElementById(c)) {
          var e = a.createElement(b);
          e.id = c;
          e.src = "https://api.gamemonetize.com/sdk.js";
          d.parentNode.insertBefore(e, d);
        }
      })(document, "script", "gamemonetize-sdk");

      // ✅ Fonction pour afficher l'overlay et appeler sdk.showBanner
      function showAdBreakThenAd() {
        var adScreen = document.getElementById('ad-break-screen');
        if (!adScreen) return;

        adScreen.style.display = 'flex';

        setTimeout(() => {
          adScreen.style.display = 'none';
          if (typeof sdk !== 'undefined' && sdk.showBanner !== 'undefined') {
            sdk.showBanner();
          } else {
            console.warn('sdk.showBanner non disponible');
          }
        }, 3000);
      }
    </script> -->

    <style>
      /* ✅ Style pour l'overlay Ad Break */
      #ad-break-screen {
        display: none;
        position: fixed;
        top: 0; left: 0;
        width: 100%; height: 100%;
        background: rgba(0,0,0,0.8);
        color: white;
        font-size: 36px;
        font-family: sans-serif;
        text-align: center;
        align-items: center;
        justify-content: center;
        z-index: 9999;
      }
    </style>
  </head>

  <body ondragstart="return false;" ondrop="return false;">
    <!-- ✅ Overlay Ad Break -->
    <div id="ad-break-screen">Ad Break</div>

    <div style="position: fixed; background-color: transparent; top: 0px; left: 0px; width: 100%; height: 100%;"></div>

    <script>
      $(document).ready(function () {
        var oMain = new CMain({
          time_show_block: 1000,
          speed: 2,
          speed_down: 8
        });

        $(oMain).on("start_session", function (evt) {
          if (getParamValue("ctl-arcade") === "true") {
            parent.__ctlArcadeStartSession();
          }
        });

        $(oMain).on("end_session", function (evt) {
          if (getParamValue("ctl-arcade") === "true") {
            parent.__ctlArcadeEndSession();
          }
        });

        $(oMain).on("save_score", function (evt, iScore) {
          if (getParamValue("ctl-arcade") === "true") {
            parent.__ctlArcadeSaveScore({ score: iScore });
          }
        });

        $(oMain).on("start_level", function (evt, iLevel) {
          if (getParamValue("ctl-arcade") === "true") {
            parent.__ctlArcadeStartLevel({ level: iLevel });
          }
        });

        $(oMain).on("end_level", function (evt, iLevel) {
          if (getParamValue("ctl-arcade") === "true") {
            parent.__ctlArcadeEndLevel({ level: iLevel });
          }
        });

        $(oMain).on("show_interlevel_ad", function (evt) {
          if (getParamValue("ctl-arcade") === "true") {
            parent.__ctlArcadeShowInterlevelAD();
          }
        });

        $(oMain).on("share_event", function (evt, iScore) {
          if (getParamValue("ctl-arcade") === "true") {
            parent.__ctlArcadeShareEvent({
              img: TEXT_SHARE_IMAGE,
              title: TEXT_SHARE_TITLE,
              msg: TEXT_SHARE_MSG1 + iScore + TEXT_SHARE_MSG2,
              msg_share: TEXT_SHARE_SHARE1 + iScore + TEXT_SHARE_SHARE1,
            });
          }
        });

        if (isIOS()) {
          setTimeout(function () { sizeHandler(); }, 200);
        } else {
          sizeHandler();
        }
      });
    </script>

    <canvas id="canvas" class="ani_hack" width="1024" height="1400"></canvas>

    <div id="block_game"
      style="position: fixed; background-color: transparent; top: 0px; left: 0px; width: 100%; height: 100%; display: none;">
    </div>
  </body>
</html>
